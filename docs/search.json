[{"path":"https://ptompalski.github.io/CanadaForestAllometry/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Piotr Tompalski. Maintainer.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"c) , person, person, model\") pt, model\") pQmv, person, person, ) r=\" (2026). CanadaForestAllometry: Allometric models Canadian forest. R package version 0.7.1, https://ptompalski.github.io/CanadaForestAllometry/.","code":"@Manual{,   title = {CanadaForestAllometry: Allometric models for Canadian forest},   author = {Authors@R: c) and {person} and {person} and person taper model\") and person Quebec merchantable volume model\") and {person} and {person} and role = \"cph\") )},   year = {2026},   note = {R package version 0.7.1},   url = {https://ptompalski.github.io/CanadaForestAllometry/}, }"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"canadaforestallometry","dir":"","previous_headings":"","what":"Allometric models for Canadian forest","title":"Allometric models for Canadian forest","text":"CanadaForestAllometry R package brings together collection published allometric models developed Canadian forests. package provides unified interface estimate range tree- stand-level attributes, based models published Canadian forestry literature. focus CanadaForestAllometry standardization: models implemented faithfully possible original formulations, transparent parameter tables, consistent inputs/outputs, jurisdiction-appropriate assumptions (e.g. merchantability rules). CanadaForestAllometry currently includes allometric models : Estimate tree-level volume (total merchantable) Estimate aboveground biomass (AGB) Convert volume biomass Convert total volume merchantable volume Apply simple growth models estimate changes attributes time","code":""},{"path":[]},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"aboveground-biomass","dir":"","previous_headings":"Included models","what":"Aboveground biomass","title":"Allometric models for Canadian forest","text":"agb_lambert_ung() - Canadian national tree aboveground biomass equations (Lambert et al. 2005, Ung et al. 2008). Example:","code":"trees <- tibble::tibble(   tree_id = 1:4,   DBH = c(22, 30, 18, 35),   height = c(18, 24, NA, 27),   species = c(\"PICE.GLA\", \"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\")  )  trees |>   dplyr::mutate(     agb = agb_lambert_ung(       DBH = DBH,       height = height,       species = species,       keep_model_id = TRUE     )   ) |>   unnest(agb) #> # A tibble: 4 × 12 #>   tree_id   DBH height species  Bwood Bbark Bstem Bfoliage Bbranches Bcrown Btotal model_id #>     <int> <dbl>  <dbl> <chr>    <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl>  <dbl> <chr>    #> 1       1    22     18 PICE.GLA 113.   15.1 128.      13.5      17.4   30.9  159.  DBHHT    #> 2       2    30     24 PICE.GLA 261.   31.6 293.      20.8      32.8   53.6  346.  DBHHT    #> 3       3    18     NA ABIE.BAL  55.5  10.2  65.7     10.5      10.8   21.3   86.9 DBH      #> 4       4    35     27 PINU.BAN 488.   29.6 518.      18.7      38.4   57.1  575.  DBHHT"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"volume-total-and-merchantable","dir":"","previous_headings":"Included models","what":"Volume (total and merchantable)","title":"Allometric models for Canadian forest","text":"vol_NL. Total merchantable volume Newfoundland Labrador. Coverage: NL. 12 species. Honer 1967; Ker 1974; Warren & Meades 1986 vol_fortin2007. Provincial merchantable volume model Quebec. Coverage: QC. 26 species. Fortin et al. 2007 vol_galbella94. Provincial taper model Saskatchewan based Kozak variable-exponent form. Coverage: SK. 12 species. Gal & Bella 1994 vol_honer83. Regional volume models central eastern Canada, applicable across multiple provinces. Coverage: NB, NL, NS, , PE, QC. 21 species. Honer et al. 1983 vol_huang94. Provincial taper model Alberta based Kozak variable-exponent form; applicable province level Alberta subregions. Coverage: AB. 13 species. Huang 1994 vol_klos2007. Provincial taper model Manitoba based Kozak variable-exponent form; applicable province level ecozone. Coverage: MB. 5 species. Klos et al. 2007 vol_kozak94. Provincial taper model British Columbia; requires BEC zone subregion input. Coverage: BC. 16 species. Kozak 1994 vol_nigh2016. Total merchantable volume equations BC. Coverage: BC. 18 species. Nigh 2016 vol_sharma2021. Regional volume models central eastern Canada, applicable across multiple provinces. Coverage: NB, NL, NS, , PE, QC. 25 species. Sharma 2021 vol_ung2013. National taper model Canada, available two variants: DBH-DBH total height. Coverage: Canada (national). 34 species. Ung et al. 2013 vol_zakrzewski2013. Provincial taper model Ontario. Coverage: . 24 species. Zakrzewski & Penner 2013","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"vol-automatic-tree-volume-estimation-across-multiple-models","dir":"","previous_headings":"Included models > Volume (total and merchantable)","what":"vol(): automatic tree volume estimation across multiple models","title":"Allometric models for Canadian forest","text":"vol() convenience wrapper estimating total merchantable tree volume using volume models implemented CanadaForestAllometry. Rather requiring users select specific model, vol() consults internal model registry automatically determines models applicable tree based : species availability model parameter tables geographic scope (province / jurisdiction) required inputs (e.g. total height, subregion BEC zone) model ranking (regional models preferred national available) Example:","code":"trees <- tibble::tibble(   DBH = c(18, 22, 30, 26, 20),   height = c(15, 18, 22, 20, 20),   species = c(\"PICE.MAR\", \"BETU.PAP\", \"POPU.TRE\", \"PSEU.MEN\", \"PINU.BAN\"),   jurisdiction =  c(\"AB\", \"ON\", \"QC\", \"BC\", \"MB\"),   subregion = c(NA, NA, NA, \"CWH\", \"Boreal Plains\") )  trees |>   dplyr::mutate(     vol(       DBH = DBH,       height = height,       species = species,       jurisdiction = jurisdiction,       subregion = subregion,       keep_model_id = TRUE     )   ) #> # A tibble: 5 × 8 #>     DBH height species  jurisdiction subregion     vol_total vol_merchantable vol_model          #>   <dbl>  <dbl> <chr>    <chr>        <chr>             <dbl>            <dbl> <chr>              #> 1    18     15 PICE.MAR AB           <NA>              0.158            0.145 vol_huang94        #> 2    22     18 BETU.PAP ON           <NA>              0.291            0.233 vol_zakrzewski2013 #> 3    30     22 POPU.TRE QC           <NA>             NA                0.674 vol_fortin2007     #> 4    26     20 PSEU.MEN BC           CWH               0.387            0.305 vol_kozak94        #> 5    20     20 PINU.BAN MB           Boreal Plains     0.291            0.274 vol_klos2007"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"merchantability-criteria","dir":"","previous_headings":"Included models > Volume (total and merchantable)","what":"Merchantability criteria","title":"Allometric models for Canadian forest","text":"Merchantable volume CanadaForestAllometry defined using jurisdiction-specific merchantability rules, following officially adopted criteria province territory (e.g., minimum top diameter, minimum DBH, stump height). models, rules applied dynamically based provided jurisdiction. volume models, however, merchantability criteria fixed within model formulation , reflecting original equations developed calibrated. cases (e.g., vol_honer83, vol_sharma2021, vol_fortin2007, vol_nigh2016), merchantable volume computed using model-specific, hard-coded criteria vary jurisdiction species. jurisdiction-specific merchantability criteria used CanadaForestAllometry can inspected internal dataset merchcrit, documents values applied jurisdiction (, applicable, species subregion).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"national-volume-to-biomass-conversions-models","dir":"","previous_headings":"Included models","what":"National volume-to-biomass conversions models","title":"Allometric models for Canadian forest","text":"Implementation national volume--biomass conversion models (Boudewyn et al. 2007), using updated model parameters available https://nfi.nfis.org/en/biomass_models. v2b() - converts merchantable volume biomass components vol_total_to_merchantable() - converts total volume merchantable volume agb_component_proportions() - calculates component proportions (stemwood, bark, branches, foliage) using either merchantable volume total aboveground biomass input","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"other","dir":"","previous_headings":"Included models","what":"Other","title":"Allometric models for Canadian forest","text":"National growth yield model (H, BA, V) (Ung et al. 2009)","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Allometric models for Canadian forest","text":"can install recent version package executing code :","code":"devtools::install_github(\"ptompalski/CanadaForestAllometry\") library(CanadaForestAllometry)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Allometric models for Canadian forest","text":"package licensed GNU Lesser General Public License (LGPL-3.0). © Majesty King Right Canada, represented Minister Natural Resources, 2026. See LICENSE file full license terms.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Allometric models for Canadian forest","text":"Boudewyn, P..; Song, X.; Magnussen, S.; Gillis, M.D. (2007). Model-based, volume--biomass conversion forested vegetated land Canada. Natural Resources Canada, Canadian Forest Service, Pacific Forestry Centre, Victoria, BC. Information Report BC-X-411. 112 p. Fortin, M., DeBlois, J., Bernier, S., Blais, G., 2007. Mise au point d’un tarif de cubage général pour les forêts québécoises : une approche pour mieux évaluer l’incertitude associée aux prévisions. Forestry Chronicle 83, 754–765. https://doi.org/10.5558/tfc83754-5 Gal, J., & Bella, .E. (1994). New stem taper functions 12 Saskatchewan timber species. Natural Resources Canada, Canadian Forest Service, Northwest Region, Information Report -X-338. Table 5. Honer, T.G. (1967). Standard volume tables merchantable conversion actors. Canadian Forest Service Information Report N-X-67. Honer, T.G.; Ker, M.F.; Alemdag, .S. 1983. Metric timber tables commercial tree species central eastern Canada. Environ. Can., Can. . Serv., Maritimes . Res. Cent., Fredericton, NB. Inf. Rep. M-X-140. https://ostrnrcan-dostrncan.canada.ca/handle/1845/239814 Huang, S. (1994). Ecologically Based Individual Tree Volume Estimation Major Alberta Tree Species. Report 1 - Individual tree volume estimation procedures Alberta: Methods Formulation Statistical Foundations. Alberta Environmental Protection, Land Forest Service, Forest Management Division, Edmonton, AB. Ker, M.F. 1974. Metric Tree Volume Tables Newfoundland. Newfoundland Forest Research Centre, St. Johns, NF. Information Report N-X-122. https://ostrnrcan-dostrncan.canada.ca/handle/1845/238893 Kozak, . (1988). variable-exponent taper equation. Canadian Journal Forest Research, 18, 1363–1368 Kozak, . (1994). Development Taper Equations BEC Zones Species. Province British Columbia, Ministry Forests (report). Klos, R. J., Wang, G. G., Dang, Q.-L., & East, E. W. (2007). Taper equations five major commercial tree species Manitoba, Canada. Western Journal Applied Forestry, 22(3), 163–170. Lambert, M. C., Ung, C. H., & Raulier, F. (2005). Canadian national tree aboveground biomass equations. Canadian Journal Forest Research, 35(8), 1996–2018. https://doi.org/10.1139/x05-112 Nigh, G.D., 2016. Total merchantable volume equations common tree species British Columbia: region biogeoclimactic zone (. Prov. B.C., Victoria, B.C. Tech. Rep. 106.). Sharma, M. (2021). Total Merchantable Volume Equations 25 Commercial Tree Species Grown Canada Northeastern United States. Forests, 12, 1270. Ung, C.H., Bernier, P., & Guo, X.-J. (2008). Canadian national biomass equations: new parameter estimates include British Columbia data. Canadian Journal Forest Research, 38(5), 1123–1132. https://doi.org/10.1139/X07-224 Ung, C.H., Bernier, P.Y., Guo, X.J., Lambert, M.-C., 2009. simple growth yield model assessing changes standing volume across Canada’s forests. Forestry Chronicle 85, 57–64. https://doi.org/10.5558/tfc85057-1 Ung, C.H., Guo, X.J., Fortin, M., 2013. Canadian national taper models. Forestry Chronicle 89, 211–224. https://doi.org/10.5558/tfc2013-040 Warren, G.R. & Meades, J.P. (1986). Wood defect density studies II: Total net volume equations Newfoundland’s forest management units. Canadian Forest Service Information Report N-X-242. Zakrzewski, W.T., Penner, M., 2013. comparison tree stem taper models use Ontario. Ontario Forest Research Institute, Report 176.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"GNU Lesser General Public License","title":"GNU Lesser General Public License","text":"Version 3, 29 June 2007Copyright © 2007 Free Software Foundation, Inc. <http://fsf.org/> Everyone permitted copy distribute verbatim copies license document, changing allowed. version GNU Lesser General Public License incorporates terms conditions version 3 GNU General Public License, supplemented additional permissions listed .","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_0-additional-definitions","dir":"","previous_headings":"","what":"0. Additional Definitions","title":"GNU Lesser General Public License","text":"used herein, “License” refers version 3 GNU Lesser General Public License, “GNU GPL” refers version 3 GNU General Public License. “Library” refers covered work governed License, Application Combined Work defined . “Application” work makes use interface provided Library, otherwise based Library. Defining subclass class defined Library deemed mode using interface provided Library. “Combined Work” work produced combining linking Application Library. particular version Library Combined Work made also called “Linked Version”. “Minimal Corresponding Source” Combined Work means Corresponding Source Combined Work, excluding source code portions Combined Work , considered isolation, based Application, Linked Version. “Corresponding Application Code” Combined Work means object code /source code Application, including data utility programs needed reproducing Combined Work Application, excluding System Libraries Combined Work.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_1-exception-to-section-3-of-the-gnu-gpl","dir":"","previous_headings":"","what":"1. Exception to Section 3 of the GNU GPL","title":"GNU Lesser General Public License","text":"may convey covered work sections 3 4 License without bound section 3 GNU GPL.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_2-conveying-modified-versions","dir":"","previous_headings":"","what":"2. Conveying Modified Versions","title":"GNU Lesser General Public License","text":"modify copy Library, , modifications, facility refers function data supplied Application uses facility (argument passed facility invoked), may convey copy modified version: ) License, provided make good faith effort ensure , event Application supply function data, facility still operates, performs whatever part purpose remains meaningful, b) GNU GPL, none additional permissions License applicable copy.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_3-object-code-incorporating-material-from-library-header-files","dir":"","previous_headings":"","what":"3. Object Code Incorporating Material from Library Header Files","title":"GNU Lesser General Public License","text":"object code form Application may incorporate material header file part Library. may convey object code terms choice, provided , incorporated material limited numerical parameters, data structure layouts accessors, small macros, inline functions templates (ten fewer lines length), following: ) Give prominent notice copy object code Library used Library use covered License. b) Accompany object code copy GNU GPL license document.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_4-combined-works","dir":"","previous_headings":"","what":"4. Combined Works","title":"GNU Lesser General Public License","text":"may convey Combined Work terms choice , taken together, effectively restrict modification portions Library contained Combined Work reverse engineering debugging modifications, also following: ) Give prominent notice copy Combined Work Library used Library use covered License. b) Accompany Combined Work copy GNU GPL license document. c) Combined Work displays copyright notices execution, include copyright notice Library among notices, well reference directing user copies GNU GPL license document. d) one following: 0) Convey Minimal Corresponding Source terms License, Corresponding Application Code form suitable , terms permit, user recombine relink Application modified version Linked Version produce modified Combined Work, manner specified section 6 GNU GPL conveying Corresponding Source. 1) Use suitable shared library mechanism linking Library. suitable mechanism one () uses run time copy Library already present user’s computer system, (b) operate properly modified version Library interface-compatible Linked Version. e) Provide Installation Information, otherwise required provide information section 6 GNU GPL, extent information necessary install execute modified version Combined Work produced recombining relinking Application modified version Linked Version. (use option 4d0, Installation Information must accompany Minimal Corresponding Source Corresponding Application Code. use option 4d1, must provide Installation Information manner specified section 6 GNU GPL conveying Corresponding Source.)","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_5-combined-libraries","dir":"","previous_headings":"","what":"5. Combined Libraries","title":"GNU Lesser General Public License","text":"may place library facilities work based Library side side single library together library facilities Applications covered License, convey combined library terms choice, following: ) Accompany combined library copy work based Library, uncombined library facilities, conveyed terms License. b) Give prominent notice combined library part work based Library, explaining find accompanying uncombined form work.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/LICENSE.html","id":"id_6-revised-versions-of-the-gnu-lesser-general-public-license","dir":"","previous_headings":"","what":"6. Revised Versions of the GNU Lesser General Public License","title":"GNU Lesser General Public License","text":"Free Software Foundation may publish revised /new versions GNU Lesser General Public License time time. new versions similar spirit present version, may differ detail address new problems concerns. version given distinguishing version number. Library received specifies certain numbered version GNU Lesser General Public License “later version” applies , option following terms conditions either published version later version published Free Software Foundation. Library received specify version number GNU Lesser General Public License, may choose version GNU Lesser General Public License ever published Free Software Foundation. Library received specifies proxy can decide whether future versions GNU Lesser General Public License shall apply, proxy’s public statement acceptance version permanent authorization choose version Library.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_component_proportions.html","id":null,"dir":"Reference","previous_headings":"","what":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","title":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","text":"Compute component proportions (stemwood, bark, branches, foliage) using multinomial-logit models (Table 6) bounds (Table 7), either function merchantable volume (\"vol\") total aboveground biomass (\"agb\").","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_component_proportions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","text":"","code":"agb_component_proportions(   x,   value_type = c(\"vol\", \"agb\"),   species,   jurisdiction,   ecozone,   renormalize = TRUE,   clamp_x = FALSE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_component_proportions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","text":"x Numeric vector. Input proportion models: merchantable volume (t/ha) value_type = \"vol\", total biomass (t/ha) value_type = \"agb\". value_type One \"vol\" \"agb\". species Character vector. NFI species codes (e.g., \"PICE.MAR\"). jurisdiction Character vector. Jurisdiction code (e.g., \"AB\"). ecozone Ecozone identifier. Either: numeric ecozone code (1–15) official ecozone name (English French; case-insensitive). renormalize Logical. Renormalize capping sum 1. clamp_x Logical. Clamp x [x_min, x_max] Table 7 evaluating.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_component_proportions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","text":"Tibble p_sw, p_sb, p_br, p_fl optional x_used. p_sw Proportion total biomass stem wood. p_sb Proportion total biomass bark. p_br Proportion total biomass branches. p_fl Proportion total biomass foliage.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_component_proportions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Boudewyn biomass component proportions (Tables 6–7) — agb_component_proportions","text":"","code":"# ---- Volume-based proportions (most common use) ---------------------------  # Single stand agb_component_proportions(   x = 350,   value_type = \"vol\",   species = \"PICE.MAR\",   jurisdiction = \"AB\",   ecozone = 6 ) #> # A tibble: 1 × 4 #>    p_sw   p_sb   p_br   p_fl #>   <dbl>  <dbl>  <dbl>  <dbl> #> 1 0.754 0.0915 0.0946 0.0596   # ---- Biomass-based proportions --------------------------------------------  agb_component_proportions(   x = 120,   value_type = \"agb\",   species = \"PICE.MAR\",   jurisdiction = \"AB\",   ecozone = 6 ) #> # A tibble: 1 × 4 #>    p_sw  p_sb  p_br   p_fl #>   <dbl> <dbl> <dbl>  <dbl> #> 1 0.717 0.102 0.106 0.0749   # ---- Vectorized / tidyverse workflow --------------------------------------  library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(tidyr)  stands <- tibble::tibble(   stand_id = 1:3,   vol_merchantable = c(120, 350, 300),   species = c(\"PICE.MAR\", \"PSEU.MEN\", \"PINU.BAN\"),   jurisdiction = c(\"AB\", \"BC\", \"ON\"),   ecozone = c(5, 13, 6) )  stands |>   mutate(     props = agb_component_proportions(       x = vol_merchantable,       value_type = \"vol\",       species = species,       jurisdiction = jurisdiction,       ecozone = ecozone     )   ) |>   unnest(props) #> # A tibble: 3 × 9 #>   stand_id vol_merchantable species  jurisdiction ecozone  p_sw   p_sb   p_br #>      <int>            <dbl> <chr>    <chr>          <dbl> <dbl>  <dbl>  <dbl> #> 1        1              120 PICE.MAR AB                 5 0.731 0.100  0.104  #> 2        2              350 PSEU.MEN BC                13 0.738 0.138  0.0995 #> 3        3              300 PINU.BAN ON                 6 0.800 0.0766 0.0810 #> # ℹ 1 more variable: p_fl <dbl>"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_lambert_ung.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","title":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","text":"Unified interface Lambert et al. (2005) Ung et al. (2008) Canadian national tree aboveground biomass equations. Two equation sets available: dbh-dbh+height. default (`equation_set = \"auto\"`), dbh+height set used valid `height` provided, otherwise dbh-set used.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_lambert_ung.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","text":"","code":"agb_lambert_ung(   DBH,   height = NA_real_,   species = NA,   equation_set = c(\"auto\", \"dbh\", \"dbh_height\"),   keep_model_id = FALSE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_lambert_ung.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","text":"DBH Tree DBH (cm). Numeric vector. height Tree height (m). Numeric vector. Optional dbh-equation set. species Tree species code NFI standard (e.g. `\"POPU.TRE\"`). Can scalar (recycled) vector matching `DBH`. equation_set Lambert & Ung equation set use. One `\"auto\"`, `\"dbh\"`, `\"dbh_height\"`. `\"auto\"` makes per-tree choice based whether `height` valid. keep_model_id Logical. `TRUE`, include `model_id` column indicating equation set used (`\"DBH\"` `\"DBHHT\"`).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_lambert_ung.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","text":"tibble AGB components: `Bwood`, `Bbark`, `Bstem`, `Bfoliage`,   `Bbranches`, `Bcrown`, `Btotal`. `keep_model_id = TRUE`, includes `model_id`.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/agb_lambert_ung.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate tree-level AGB using Lambert & Ung national biomass equations — agb_lambert_ung","text":"","code":"# Auto-selection (equation_set = \"auto\" by default): # height missing -> DBH-only equations agb_lambert_ung(   DBH = 20,   species = \"PICE.MAR\" ) #> # A tibble: 1 × 7 #>   Bwood Bbark Bstem Bfoliage Bbranches Bcrown Btotal #>   <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl>  <dbl> #> 1  89.0  12.5  102.     11.6      14.6   26.1   128.  # height provided -> DBH + height equations agb_lambert_ung(   DBH = 20,   height = 17,   species = \"PICE.MAR\" ) #> # A tibble: 1 × 7 #>   Bwood Bbark Bstem Bfoliage Bbranches Bcrown Btotal #>   <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl>  <dbl> #> 1  99.4  13.4  113.     9.60      12.0   21.5   134.  # Show which equation set was used (model_id appended as the last column) agb_lambert_ung(   DBH = 20,   species = \"PICE.MAR\",   keep_model_id = TRUE ) #> # A tibble: 1 × 8 #>   Bwood Bbark Bstem Bfoliage Bbranches Bcrown Btotal model_id #>   <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl>  <dbl> <chr>    #> 1  89.0  12.5  102.     11.6      14.6   26.1   128. DBH       # Force a specific equation set agb_lambert_ung(   DBH = 20,   height = 17,   species = \"PICE.MAR\",   equation_set = \"dbh\" ) #> # A tibble: 1 × 7 #>   Bwood Bbark Bstem Bfoliage Bbranches Bcrown Btotal #>   <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl>  <dbl> #> 1  89.0  12.5  102.     11.6      14.6   26.1   128.  # Multiple rows trees <- tibble::tibble(  tree_id = 1:4,  DBH = c(22, 30, 18, 35),  height = c(18, 24, NA, 27),  species = c(\"PICE.GLA\", \"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\") )  trees |>  dplyr::mutate(    agb = agb_lambert_ung(      DBH = DBH,      height = height,      species = species,      keep_model_id = TRUE    )  ) |>  tidyr::unnest(agb) #> # A tibble: 4 × 12 #>   tree_id   DBH height species  Bwood Bbark Bstem Bfoliage Bbranches Bcrown #>     <int> <dbl>  <dbl> <chr>    <dbl> <dbl> <dbl>    <dbl>     <dbl>  <dbl> #> 1       1    22     18 PICE.GLA 113.   15.1 128.      13.5      17.4   30.9 #> 2       2    30     24 PICE.GLA 261.   31.6 293.      20.8      32.8   53.6 #> 3       3    18     NA ABIE.BAL  55.5  10.2  65.7     10.5      10.8   21.3 #> 4       4    35     27 PINU.BAN 488.   29.6 518.      18.7      38.4   57.1 #> # ℹ 2 more variables: Btotal <dbl>, model_id <chr>"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":null,"dir":"Reference","previous_headings":"","what":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"Convenience helper fetch CBM-style merchantability criteria (stump height, top diameter, minimum DBH) internal `merchcrit` lookup table.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"","code":"get_merch_criteria(   jurisdiction,   species = NA_character_,   BEC_zone = NA_character_,   verbose = TRUE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"jurisdiction Province/Territory code (e.g., `\"BC\"`, `\"AB\"`). species Species code. Optional `\"BC\"`; missing, falls back `\"\"` warning. BEC_zone Optional BEC zone code (e.g., `\"CWH\"`, `\"ICH\"`). missing `\"BC\"`, conservative criteria taken `BEC_group == \"UNKNOWN\"`. verbose TRUE, warns BC falls back genus-level, UNKNOWN BEC, .","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"one-row tibble columns:   `jurisdiction`, `species`, `stumpht_m`, `topdbh_cm`, `mindbh_cm`.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"lookup, inputs standardized using internal helpers: * `standardize_jurisdiction_code()` `jurisdiction` * `standardize_species_code()` `species` (keeps `\"\"` -) Rules: * British Columbia (`\"BC\"`), `species` OPTIONAL:   - `species` missing, function falls back `Species == \"\"` warns.   - `BEC_zone` provided can mapped, criteria looked using     (Province + Species + BEC_group).   - `BEC_zone` missing/unknown, criteria fall back conservative BC     BEC-independent layer using `BEC_group == \"UNKNOWN\"` (species-specific present,     otherwise `Species == \"\"`).   - exact species match found, function falls back genus-level rules     (e.g., `PICE.GLA` -> `PICE.SPP`) `Species == \"\"`. * jurisdictions, criteria jurisdiction-level (Province)   species/BEC ignored. Stump height returned metres (converted centimetres).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_merch_criteria.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get merchantability criteria for a jurisdiction/species (BEC-aware for BC) — get_merch_criteria","text":"","code":"get_merch_criteria(\"ON\") #> # A tibble: 1 × 5 #>   jurisdiction species stumpht_m topdbh_cm mindbh_cm #>   <chr>        <chr>       <dbl>     <dbl>     <dbl> #> 1 ON           ALL           0.3      13.1         9 get_merch_criteria(\"PEI\")                        # standardized to \"PE\" #> # A tibble: 1 × 5 #>   jurisdiction species stumpht_m topdbh_cm mindbh_cm #>   <chr>        <chr>       <dbl>     <dbl>     <dbl> #> 1 PE           ALL          0.15         8         9 get_merch_criteria(\"BC\", \"PSEU.MEN\", \"CWH\")       # BEC-aware #> # A tibble: 1 × 5 #>   jurisdiction species  stumpht_m topdbh_cm mindbh_cm #>   <chr>        <chr>        <dbl>     <dbl>     <dbl> #> 1 BC           PSEU.MEN       0.3        15      17.5 get_merch_criteria(\"BC\", \"PICE.GLA\", \"CWH\")       # genus fallback to PICE.SPP if present #> # A tibble: 1 × 5 #>   jurisdiction species  stumpht_m topdbh_cm mindbh_cm #>   <chr>        <chr>        <dbl>     <dbl>     <dbl> #> 1 BC           PICE.GLA       0.3        15      17.5 get_merch_criteria(\"BC\")                          # falls back to BC ALL + UNKNOWN (warns) #> Warning: For jurisdiction 'BC', `species` was not provided; using BC fallback Species='ALL'. #> Warning: BEC_zone missing; using conservative BC 'UNKNOWN' utilization. #> # A tibble: 1 × 5 #>   jurisdiction species stumpht_m topdbh_cm mindbh_cm #>   <chr>        <chr>       <dbl>     <dbl>     <dbl> #> 1 BC           ALL           0.3        15      17.5"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":null,"dir":"Reference","previous_headings":"","what":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"Retrieves parameter table given volume model using volume_model_registry parameter objects bundled CanadaForestAllometry package (e.g., parameters_NationalTaperModelsDBH).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"","code":"get_volume_params(   model_id,   species,   province = NA_character_,   subregion = \"ALL\",   strict = FALSE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"model_id single model id volume_model_registry()$model_id, e.g. \"national_ung_dbh\" \"regional_kozak88\". species Species code (e.g., \"POPU.TRE\"). Required current models. province Province/jurisdiction code (e.g., \"BC\", \"AB\"). Used regional models parameter table includes Province column. subregion Subregion identifier (BEC zone BC). Used regional models parameter table includes Subregion column. strict Logical. TRUE, throw error matching parameters found. FALSE (default), returns empty tibble.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"tibble containing filtered parameter rows requested model.   rows match strict = FALSE, returns empty tibble   columns underlying parameter table.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"function applies **context filters** (relevant / available parameter table), typically species, regional models also province subregion. function **** refactor run volume engines; returns parameter rows needed given model/context.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/get_volume_params.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get volume-model parameters from the CanadaForestAllometry registry — get_volume_params","text":"","code":"# National DBH-only (Ung et al.) # get_volume_params(\"national_ung_dbh\", species = \"POPU.TRE\")  # Regional Kozak 88 (requires province/subregion in most parameter tables) # get_volume_params(\"regional_kozak88\", species = \"POPU.TRE\", province = \"AB\", subregion = \"ALL\")  # BC Kozak 94 (BEC zone as subregion) # get_volume_params(\"regional_kozak94\", species = \"PSEU.MEN\", province = \"BC\", subregion = \"SBS\")"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/merchcrit.html","id":null,"dir":"Reference","previous_headings":"","what":"Merchantability criteria — merchcrit","title":"Merchantability criteria — merchcrit","text":"dataset containing merchantability criteria, jurisdiction, species","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/merchcrit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Merchantability criteria — merchcrit","text":"","code":"merchcrit"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/merchcrit.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Merchantability criteria — merchcrit","text":"data frame consisting merchantability criteria.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/standardize_jurisdiction_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize jurisdiction (province and territorial) codes — standardize_jurisdiction_code","title":"Standardize jurisdiction (province and territorial) codes — standardize_jurisdiction_code","text":"Standardize jurisdiction (province territorial) codes","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/standardize_jurisdiction_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize jurisdiction (province and territorial) codes — standardize_jurisdiction_code","text":"","code":"standardize_jurisdiction_code(x)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/standardize_species_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize NFI species codes — standardize_species_code","title":"Standardize NFI species codes — standardize_species_code","text":"Converts compact codes like \"PICEGLA\" \"PICE.GLA\". Keeps \"\" unchanged.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/standardize_species_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize NFI species codes — standardize_species_code","text":"","code":"standardize_species_code(x, keep_all = TRUE)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":null,"dir":"Reference","previous_headings":"","what":"Ung2009 Growth and Yield Model — Ung2009","title":"Ung2009 Growth and Yield Model — Ung2009","text":"function implements models described Ung et al. (2009). Two models (Nat1 Nat2) available: Nat1: multi-equation system predicting tree height (H), basal area (BA),           volume (V) based stand age, growth degree days (GDD), precipitation (PREC),           species-specific parameters. Nat2: single equation focuses predicting stand volume (V)           using age, GDD, PREC.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ung2009 Growth and Yield Model — Ung2009","text":"","code":"Ung2009(species, age, GDD, PREC, model = c(\"both\", \"Nat1\", \"Nat2\"))"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ung2009 Growth and Yield Model — Ung2009","text":"species Character. valid species name defined parameter table model. age Numeric vector. age(s) stand years. Must greater 0. GDD Numeric. Growth degree days. PREC Numeric. Precipitation. model Character. model(s) use. One \"Nat1\", \"Nat2\", \"\". Defaults \"\".","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ung2009 Growth and Yield Model — Ung2009","text":"tibble containing: age H (Nat1 used): Predicted tree height (m). BA (Nat1 used): Predicted basal area (m²/ha). V (Nat1 used): Predicted volume (m³/ha). V2 (Nat2 used): Predicted volume (m³/ha) based Nat2 model.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Ung2009 Growth and Yield Model — Ung2009","text":"Nat1 model, height basal area modeled using age, GDD, PREC Chapman-Richards formulation, volume derived via allometric equation. contrast, Nat2 streamlined, modeling volume directly function variables without explicit height basal area components.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Ung2009 Growth and Yield Model — Ung2009","text":"Ung, C.-H., Bernier, P.Y., Guo, X.J., Lambert, M.-C. (2009). \"simple growth yield model assessing changes standing volume across Canada’s forests.\" Forestry Chronicle, 85, 57–64. doi:10.5558/tfc85057-1 .","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/Ung2009.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Ung2009 Growth and Yield Model — Ung2009","text":"","code":"# Example 1: Use both models (default), returning columns: age, H, BA, V, V2 res_both <- Ung2009(   species = \"ABIE.BAL\",   age = 1:150,   GDD = 1500,   PREC = 800 ) res_both #> # A tibble: 150 × 5 #>      age             H       BA        V       V2 #>    <int>         <dbl>    <dbl>    <dbl>    <dbl> #>  1     1 0.00000000972 3.79e-30 6.49e-37 7.47e-37 #>  2     2 0.000439      1.66e-14 1.72e-17 1.92e-17 #>  3     3 0.0156        2.72e- 9 5.13e-11 5.67e-11 #>  4     4 0.0932        1.10e- 6 8.85e- 8 9.74e- 8 #>  5     5 0.272         4.03e- 5 7.75e- 6 8.50e- 6 #>  6     6 0.556         4.44e- 4 1.53e- 4 1.67e- 4 #>  7     7 0.926         2.47e- 3 1.29e- 3 1.41e- 3 #>  8     8 1.36          8.93e- 3 6.35e- 3 6.94e- 3 #>  9     9 1.83          2.43e- 2 2.20e- 2 2.40e- 2 #> 10    10 2.32          5.41e- 2 5.94e- 2 6.48e- 2 #> # ℹ 140 more rows  # Example 2: Use only the Nat1 model, returning columns: age, H, BA, V res_nat1 <- Ung2009(   species = \"ABIE.BAL\",   age = 1:150,   GDD = 1500,   PREC = 800,   model = \"Nat1\" ) res_nat1 #> # A tibble: 150 × 4 #>      age             H       BA        V #>    <int>         <dbl>    <dbl>    <dbl> #>  1     1 0.00000000972 3.79e-30 6.49e-37 #>  2     2 0.000439      1.66e-14 1.72e-17 #>  3     3 0.0156        2.72e- 9 5.13e-11 #>  4     4 0.0932        1.10e- 6 8.85e- 8 #>  5     5 0.272         4.03e- 5 7.75e- 6 #>  6     6 0.556         4.44e- 4 1.53e- 4 #>  7     7 0.926         2.47e- 3 1.29e- 3 #>  8     8 1.36          8.93e- 3 6.35e- 3 #>  9     9 1.83          2.43e- 2 2.20e- 2 #> 10    10 2.32          5.41e- 2 5.94e- 2 #> # ℹ 140 more rows  # Example 3: Use only the Nat2 model, returning columns: age, V2 res_nat2 <- Ung2009(   species = \"ABIE.BAL\",   age = 1:150,   GDD = 1500,   PREC = 800,   model = \"Nat2\" ) res_nat2 #> # A tibble: 150 × 2 #>      age       V2 #>    <int>    <dbl> #>  1     1 7.47e-37 #>  2     2 1.92e-17 #>  3     3 5.67e-11 #>  4     4 9.74e- 8 #>  5     5 8.50e- 6 #>  6     6 1.67e- 4 #>  7     7 1.41e- 3 #>  8     8 6.94e- 3 #>  9     9 2.40e- 2 #> 10    10 6.48e- 2 #> # ℹ 140 more rows"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"High-level wrapper Boudewyn et al. (2007) model-based volume--biomass conversion live trees. Given gross merchantable volume per hectare, function: converts volume stem wood biomass components (Tables 3–5; Eqs. 1–3), computes biomass proportions using volume-based multinomial-logit         models (Table 6; Eqs. 4–7), applies Table 7 proportion bounds (caps) prevent unrealistic         proportions extrapolating, returns total aboveground biomass components (bark, branches, foliage).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"","code":"v2b(   vol_merchantable,   species,   jurisdiction,   ecozone,   include_props = FALSE,   include_intermediates = FALSE,   renormalize = TRUE,   clamp_x = FALSE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"vol_merchantable Numeric vector. Gross merchantable volume per hectare. species Character vector. NFI species codes (e.g., \"PICE.MAR\"). Genus-level codes (\"PICE.SPP\") variety-level codes (\"PICE.MAR.AAA\") supported. jurisdiction Character vector. Jurisdiction code (e.g., \"AB\"). ecozone Ecozone identifier. Either: numeric ecozone code (1–15) official ecozone name (English French; case-insensitive). include_props Logical. TRUE, include biomass proportions (p_sw, p_sb, p_br, p_fl) output. include_intermediates Logical. TRUE, include intermediate stem-biomass quantities (b_m, b_n, b_nm, b_s) factors (f_nm, f_s, has_sapling, b_stem_total). renormalize Logical. TRUE (default), renormalize capped proportions sum 1. can helpful multiple components hit bounds. clamp_x Logical. TRUE, clamp vol_merchantable calibration range [x_min, x_max] Table 7 evaluating proportion equations. Disabled default.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"tibble one row per input observation. default includes: b_total Total aboveground tree biomass (t/ha). b_bark Bark biomass (t/ha). b_branches Branch biomass (t/ha). b_foliage Foliage biomass (t/ha). Additional columns included include_props /include_intermediates TRUE.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"function vectorized inputs designed work naturally inside dplyr::mutate() (typically followed tidyr::unnest()). Proportion caps (Table 7). Table 6 proportion models can yield extreme values extrapolated beyond calibration range. implementation applies Table 7 bounds (low/high caps) proportion keep outputs within plausible limits. Extrapolation vs clamping. default (clamp_x = FALSE), input vol_merchantable used directly. vol_merchantable falls outside calibration range (x_min/x_max) reported Table 7, results extrapolations, although Table 7 proportion caps still applied. Setting clamp_x = TRUE replaces vol_merchantable min(max(vol_merchantable, x_min), x_max) computing proportions; can materially change results high-volume stands may lead systematic underestimation vol_merchantable > x_max. reason, clamping disabled default.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/v2b.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert volume to aboveground biomass components (Boudewyn et al. 2007) — v2b","text":"","code":"# Single case (one stand) v2b(   vol_merchantable = 350,   species = \"PSEU.MEN\",   jurisdiction = \"BC\",   ecozone = 13 ) #> # A tibble: 1 × 4 #>   b_total b_bark b_branches b_foliage #>     <dbl>  <dbl>      <dbl>     <dbl> #> 1    241.   33.2       24.0      6.03  # Include proportions and intermediate quantities used in the calculation v2b(   vol_merchantable = 350,   species = \"PSEU.MEN\",   jurisdiction = \"BC\",   ecozone = 13,   include_props = TRUE,   include_intermediates = TRUE ) #> # A tibble: 1 × 16 #>   b_total b_bark b_branches b_foliage  p_sw  p_sb   p_br   p_fl   b_m   b_n #>     <dbl>  <dbl>      <dbl>     <dbl> <dbl> <dbl>  <dbl>  <dbl> <dbl> <dbl> #> 1    241.   33.2       24.0      6.03 0.738 0.138 0.0995 0.0250  153.  24.7 #> # ℹ 6 more variables: b_nm <dbl>, b_s <dbl>, f_nm <dbl>, f_s <dbl>, #> #   has_sapling <lgl>, b_stem_total <dbl>  # Tidyverse workflow: compute biomass for multiple stands # (one row per stand) and bind results as new columns. library(dplyr) library(tidyr)  stands <- tibble::tibble(   stand_id = 1:3,   vol_merchantable = c(120, 350, 300),   species = c(\"PICE.MAR\", \"PSEU.MEN\", \"PINU.BAN\"),   jurisdiction = c(\"AB\", \"BC\", \"ON\"),   ecozone = c(5, 13, 6) )  stands |>   mutate(     v2b = v2b(       vol_merchantable = vol_merchantable,       species = species,       jurisdiction = jurisdiction,       ecozone = ecozone,       include_props = TRUE     )   ) |>   unnest(v2b) #> # A tibble: 3 × 13 #>   stand_id vol_merchantable species  jurisdiction ecozone b_total b_bark #>      <int>            <dbl> <chr>    <chr>          <dbl>   <dbl>  <dbl> #> 1        1              120 PICE.MAR AB                 5    136.   13.6 #> 2        2              350 PSEU.MEN BC                13    241.   33.2 #> 3        3              300 PINU.BAN ON                 6    176.   13.5 #> # ℹ 6 more variables: b_branches <dbl>, b_foliage <dbl>, p_sw <dbl>, #> #   p_sb <dbl>, p_br <dbl>, p_fl <dbl>"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate tree volume: choose best available model or run all candidate models — vol","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"`vol()` main convenience wrapper estimating total merchantable stem volume diameter height. automatically selects runs one () volume models implemented CanadaForestAllometry, based model registry returned [volume_model_registry()].","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"","code":"vol(   DBH,   height = NA_real_,   species,   jurisdiction,   subregion = NA_character_,   pick_best = TRUE,   keep_model_id = TRUE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"DBH Numeric vector. Diameter breast height (cm). height Numeric vector. Total height (m). Can `NA` use DBH-models (currently `vol_ung2013()`). species Character vector. Species codes (e.g., \"PICE.GLA\"). jurisdiction Character scalar vector. Province/territory code (e.g., \"BC\", \"QC\"). subregion Optional character vector. Subregion identifier (e.g., BEC zone `vol_kozak94()`). pick_best Logical. `TRUE` (default), pick single best model per tree using `rank`. `FALSE`, compute candidate model outputs per tree return list-column (one tibble per tree) can unnested comparison. keep_model_id Logical. `TRUE`, include `vol_model` column engine function name used.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"`pick_best = TRUE`, tibble one row per tree columns: `vol_total`, `vol_merchantable`, optionally `vol_model`. `pick_best = FALSE`, list (suitable use list-column `dplyr::mutate()`) one element per tree. element tibble candidate model outputs (`vol_total`, `vol_merchantable`, optionally `vol_model`).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"model-selection-logic","dir":"Reference","previous_headings":"","what":"Model selection logic","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"Model selection driven model registry occurs per input tree: Geographic applicability: models filtered whose     `province_scope` includes provided `jurisdiction` (`\"\"`). Species coverage: models filtered include     provided `species` parameter tables. models may include     genus/group codes (e.g., `\"PICE.SPP\"`); treated     covering matching species within genus/group. Required inputs: models require total height excluded     `height` missing. Models require subregion (e.g., BEC zone     certain provincial models) excluded `subregion` missing. Model ranking: multiple eligible models remain, `pick_best = TRUE`     selects highest-ranked model (`rank`) tree.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"fallback-behavior","dir":"Reference","previous_headings":"","what":"Fallback behavior","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"Availability evaluated species level, jurisdiction. means regional/provincial model may exist jurisdiction may include coefficients provided species. cases, `vol()` automatically falls back another eligible model (e.g., multi-province regional model national model) ** cover species required inputs.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"important-limitations-and-recommended-use","dir":"Reference","previous_headings":"","what":"Important limitations and recommended use","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"automatic wrapper. selection registry-driven,     `vol()` may use model one intended (e.g., national     model instead regional model, different regional model     expected), especially preferred model available     input species missing required inputs. Model outputs differ. Different models generally return     slightly different volume estimates DBH/height/species due     differences model form, fitted data, geographic scope,     merchantability assumptions. differences expected. require specific model, use `vol()`. Instead, call     relevant model function directly (e.g., `vol_huang94()`, `vol_kozak94()`,     `vol_ung2013()`, etc.) ensure full control reproducibility. Investigate operational use. strongly recommended     run `vol()` `pick_best = FALSE` exploratory analyses inspect     models eligible sensitive results model choice.     `pick_best = FALSE`, `vol()` returns list-column (one element per     tree) containing tibble candidate model outputs; can unnested     compare models.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate tree volume: choose best available model or run all candidate models — vol","text":"","code":"## --- Basic usage: pick best available model (default) --- vol(   DBH = 20,   height = 20,   species = \"PICE.MAR\",   jurisdiction = \"ON\" ) #> # A tibble: 1 × 3 #>   vol_total vol_merchantable vol_model          #>       <dbl>            <dbl> <chr>              #> 1     0.285            0.260 vol_zakrzewski2013  ## --- Return all applicable models (one row per engine) --- ## Note: national Ung DBH-only and DBH+HT variants are collapsed ## into a single result (preferring the height-based variant). vol(   DBH = 20,   height = 20,   species = \"PICE.MAR\",   jurisdiction = \"ON\",   pick_best = FALSE,   keep_model_id = TRUE ) #> [[1]] #> # A tibble: 4 × 3 #>   vol_total vol_merchantable vol_model          #>       <dbl>            <dbl> <chr>              #> 1     0.260            0.227 vol_honer83        #> 2     0.282            0.267 vol_sharma2021     #> 3     0.266            0.248 vol_ung2013        #> 4     0.285            0.260 vol_zakrzewski2013 #>   ## --- Missing height: height-dependent models are skipped --- ## Falls back to DBH-only models where available (e.g. national Ung). vol(   DBH = 25,   species = \"BETU.PAP\",   jurisdiction = \"QC\" ) #> # A tibble: 1 × 3 #>   vol_total vol_merchantable vol_model   #>       <dbl>            <dbl> <chr>       #> 1     0.441            0.428 vol_ung2013  ## --- Regional model with required subregion (BC example) --- ## Kozak (1994) requires a BEC zone; if provided, it is preferred. vol(   DBH = 30,   height = 22,   species = \"THUJ.PLI\",   jurisdiction = \"BC\",   subregion = \"CWH\" ) #> # A tibble: 1 × 3 #>   vol_total vol_merchantable vol_model   #>       <dbl>            <dbl> <chr>       #> 1     0.655            0.565 vol_kozak94  ## --- Automatic fallback when a regional model does not cover species --- ## If no provincial model covers the species, a suitable national or ## multi-province regional model is used instead. vol(   DBH = 18,   height = 15,   species = \"ACER.SAC\",   jurisdiction = \"MB\" ) #> # A tibble: 1 × 3 #>   vol_total vol_merchantable vol_model   #>       <dbl>            <dbl> <chr>       #> 1     0.151            0.142 vol_ung2013  ## --- Vectorized input --- vol(   DBH = c(18, 25, 32),   height = c(15, 20, 25),   species = c(\"PICE.MAR\", \"BETU.PAP\", \"ACER.RUB\"),   jurisdiction = \"ON\",   keep_model_id = TRUE ) #> # A tibble: 3 × 3 #>   vol_total vol_merchantable vol_model          #>       <dbl>            <dbl> <chr>              #> 1     0.172            0.150 vol_zakrzewski2013 #> 2     0.411            0.353 vol_zakrzewski2013 #> 3     0.766            0.635 vol_zakrzewski2013  #' ## --- Tidyverse workflow with multiple species and jurisdictions --- library(dplyr)  trees <- tibble::tibble(   DBH = c(18, 22, 30, 26),   height = c(15, 18, 22, 20),   species = c(\"PICE.MAR\", \"BETU.PAP\", \"POPU.TRE\", \"PSEU.MEN\"),   jurisdiction =  c(\"AB\", \"ON\", \"QC\", \"BC\"),   subregion = c(NA, NA, NA, \"CWH\") )  trees |>   dplyr::mutate(     vol(       DBH = DBH,       height = height,       species = species,       jurisdiction = jurisdiction,       subregion = subregion,       keep_model_id = TRUE     )   ) #> Warning: There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `.out = purrr::map2(.data$engine, .data$.args, #>   safe_call_engine_one)`. #> Caused by warning: #> ! There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `merch = purrr::pmap(...)`. #> Caused by warning: #> ! There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `merch = purrr::pmap(...)`. #> Caused by warning: #> ! BEC_zone missing; using conservative BC 'UNKNOWN' utilization. #> # A tibble: 4 × 8 #>     DBH height species  jurisdiction subregion vol_total vol_merchantable #>   <dbl>  <dbl> <chr>    <chr>        <chr>         <dbl>            <dbl> #> 1    18     15 PICE.MAR AB           NA            0.158            0.145 #> 2    22     18 BETU.PAP ON           NA            0.291            0.233 #> 3    30     22 POPU.TRE QC           NA           NA                0.674 #> 4    26     20 PSEU.MEN BC           CWH           0.387            0.305 #> # ℹ 1 more variable: vol_model <chr>  ## --- Same data, return all applicable volume models per tree --- trees |>   dplyr::mutate(     vol(       DBH = DBH,       height = height,       species = species,       jurisdiction = jurisdiction,       subregion = subregion,       pick_best = FALSE,       keep_model_id = TRUE     )   ) #> Warning: There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `.out = purrr::map2(.data$engine, .data$.args, #>   safe_call_engine_one)`. #> Caused by warning: #> ! There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `merch = purrr::pmap(...)`. #> Caused by warning: #> ! There was 1 warning in `dplyr::mutate()`. #> ℹ In argument: `merch = purrr::pmap(...)`. #> Caused by warning: #> ! BEC_zone missing; using conservative BC 'UNKNOWN' utilization. #> # A tibble: 4 × 6 #>     DBH height species  jurisdiction subregion `vol(...)`       #>   <dbl>  <dbl> <chr>    <chr>        <chr>     <list>           #> 1    18     15 PICE.MAR AB           NA        <tibble [2 × 3]> #> 2    22     18 BETU.PAP ON           NA        <tibble [4 × 3]> #> 3    30     22 POPU.TRE QC           NA        <tibble [4 × 3]> #> 4    26     20 PSEU.MEN BC           CWH       <tibble [3 × 3]>"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry.html","id":null,"dir":"Reference","previous_headings":"","what":"Volume model registry — volume_model_registry","title":"Volume model registry — volume_model_registry","text":"Returns registry (metadata table) describing tree volume models available CanadaForestAllometry. registry used wrapper functions (1) discover models, (2) select best applicable model given tree, (3) select correct model function.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Volume model registry — volume_model_registry","text":"","code":"volume_model_registry()"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Volume model registry — volume_model_registry","text":"tibble one row per model metadata fields used model selection.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry_species.html","id":null,"dir":"Reference","previous_headings":"","what":"Volume model registry with species coverage — volume_model_registry_species","title":"Volume model registry with species coverage — volume_model_registry_species","text":"Volume model registry species coverage","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry_species.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Volume model registry with species coverage — volume_model_registry_species","text":"","code":"volume_model_registry_species()"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/volume_model_registry_species.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Volume model registry with species coverage — volume_model_registry_species","text":"tibble like `volume_model_registry()` plus:   - `species` (list-column character vectors)   - `n_species` (integer)   - `species_text` (collapsed string printing)","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"Deterministic (fixed-effects ) implementation Fortin et al. general merchantable volume model developed Québec forests.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"","code":"vol_fortin2007(DBH, height, species)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"Fortin, M., DeBlois, J., Bédard, S., Meunier, S. (2007). Mise au point d’un tarif de cubage général pour les forêts québécoises : une approche pour mieux tenir compte des effets de la dimension des arbres. Gouvernement du Québec, Ministère des Ressources naturelles et de la Faune. Full reference implementation: https://github.com/CWFC-CCFB/CFSForestTools","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"DBH Numeric vector diameter breast height (cm). height Numeric vector total tree height (m). species Character vector species codes (standardized `standardize_species_code()`).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"tibble volumes (m^3): vol_total Numeric. Total volume (m\\(^3\\)). Currently returned     NA placeholder; total volume handled later via     expansion factors. vol_merchantable Numeric. Merchantable stem volume (m\\(^3\\),     bark).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"function returns merchantable stem volume (bark) individual-tree level function diameter breast height (DBH) total tree height. fixed-effects (mean) component original mixed-effects formulation implemented CanadaForestAllometry; stochastic components (random effects residual variance) intentionally omitted. Merchantable volume defined according Québec provincial inventory standards. Trees DBH < 9.1 cm considered non-merchantable merchantable volume equal zero. Users requiring complete mixed-effects model formulation full functionality (e.g., stochastic predictions uncertainty propagation) directed official Java implementation available CFSForestTools repository: https://github.com/CWFC-CCFB/CFSForestTools","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_fortin2007.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate tree merchantable volume using Fortin et al. (2007) model (QC) — vol_fortin2007","text":"","code":"# Single tree vol_fortin2007(   DBH = 20,   height = 18,   species = \"PICE.MAR\" ) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1        NA            0.235  # Multiple trees, vectorized vol_fortin2007(   DBH = c(18, 25, 32),   height = c(15, 20, 24),   species = c(\"ABIE.BAL\", \"PICE.GLA\", \"PINU.BAN\") ) #> # A tibble: 3 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1        NA            0.157 #> 2        NA            0.423 #> 3        NA            0.813"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_galbella94.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume in Saskatchewan using Kozak (1988) form with Gal & Bella (1994) parameters — vol_galbella94","title":"Estimate tree volume in Saskatchewan using Kozak (1988) form with Gal & Bella (1994) parameters — vol_galbella94","text":"Estimate tree volume Saskatchewan using Kozak (1988) form Gal & Bella (1994) parameters","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_galbella94.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume in Saskatchewan using Kozak (1988) form with Gal & Bella (1994) parameters — vol_galbella94","text":"","code":"vol_galbella94(DBH, height, species)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_galbella94.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume in Saskatchewan using Kozak (1988) form with Gal & Bella (1994) parameters — vol_galbella94","text":"DBH Numeric vector. Diameter breast height (cm). height Numeric vector. Total height (m). species Character vector. Species code (e.g., \"PICE.MAR\").","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_galbella94.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate tree volume in Saskatchewan using Kozak (1988) form with Gal & Bella (1994) parameters — vol_galbella94","text":"Gal, J., & Bella, .E. (1994). New stem taper functions 12 Saskatchewan timber species. Natural Resources Canada, Canadian Forest Service, Northwest Region, Information Report -X-338. Table 5. Kozak, . (1988). variable-exponent taper equation.Canadian Journal Forest Research, 18, 1363–1368.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":null,"dir":"Reference","previous_headings":"","what":"Honer stem volume using DBH and total height — vol_honer83","title":"Honer stem volume using DBH and total height — vol_honer83","text":"Estimates total merchantable stem volume using Honer et al. (1983) model, developed central eastern Canada.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Honer stem volume using DBH and total height — vol_honer83","text":"","code":"vol_honer83(DBH, height, species)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Honer stem volume using DBH and total height — vol_honer83","text":"DBH Tree diameter breast height (cm) height Total height (m) species Species code (e.g., \"PINU.CON\")","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Honer stem volume using DBH and total height — vol_honer83","text":"data.frame vol_total vol_merchantable","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Honer stem volume using DBH and total height — vol_honer83","text":"Honer, T.G.; Ker, M.F.; Alemdag, .S. 1983. Metric timber tables commercial tree species central eastern Canada. Environ. Can., Can. . Serv., Maritimes . Res. Cent., Fredericton, NB. Inf. Rep. M-X-140.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_honer83.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Honer stem volume using DBH and total height — vol_honer83","text":"","code":"# Single tree vol_honer83(   DBH = 30,   height = 22,   species = \"PICE.GLA\" ) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.629            0.582  # Multiple trees, mixed species vol_honer83(   DBH = c(25, 32, 18),   height = c(20, 24, 15),   species = c(\"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\") ) #> # A tibble: 3 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.406            0.366 #> 2     0.743            0.686 #> 3     0.176            0.147  # Works with the pipe operator: trees <- tibble::tibble(   tree_id = 1:4,   dbh = c(22, 30, 18, 35),   ht  = c(18, 24, 15, 27),   species = c(\"PICE.GLA\", \"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\") ) trees |> dplyr::mutate(vol=vol_honer83(dbh, ht, species)) |> tidyr::unnest(vol) #> # A tibble: 4 × 6 #>   tree_id   dbh    ht species  vol_total vol_merchantable #>     <int> <dbl> <dbl> <chr>        <dbl>            <dbl> #> 1       1    22    18 PICE.GLA     0.289            0.254 #> 2       2    30    24 PICE.GLA     0.672            0.621 #> 3       3    18    15 ABIE.BAL     0.170            0.142 #> 4       4    35    27 PINU.BAN     1.10             1.04"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_huang94.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","title":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","text":"Estimate tree volume Alberta using Kozak (1988) model form Huang (1994) parameters","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_huang94.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","text":"","code":"vol_huang94(DBH, height, species, subregion = \"Province\")"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_huang94.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","text":"DBH Numeric vector. Diameter breast height (cm). height Numeric vector. Total height (m). species Character vector. Species code (e.g., \"PICE.MAR\"). subregion Character vector. Alberta subregion name; defaults \"Province\".","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_huang94.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","text":"tibble volumes (m^3): total merchantable.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_huang94.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate tree volume in Alberta using Kozak (1988) model form with Huang (1994) parameters — vol_huang94","text":"Huang, S. (1994). Ecologically Based Individual Tree Volume Estimation Major Alberta Tree Species. Report 1 - Individual tree volume estimation procedures Alberta: Methods Formulation Statistical Foundations. Alberta Environmental Protection, Land Forest Service, Forest Management Division, Edmonton, AB. Kozak, . (1988). variable-exponent taper equation. Canadian Journal Forest Research, 18, 1363–1368.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_klos2007.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume in Manitoba using Kozak (1988) form with Klos (2004) parameters — vol_klos2007","title":"Estimate tree volume in Manitoba using Kozak (1988) form with Klos (2004) parameters — vol_klos2007","text":"Estimate tree volume Manitoba using Kozak (1988) form Klos (2004) parameters","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_klos2007.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume in Manitoba using Kozak (1988) form with Klos (2004) parameters — vol_klos2007","text":"","code":"vol_klos2007(DBH, height, species, subregion = \"Province\")"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_klos2007.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume in Manitoba using Kozak (1988) form with Klos (2004) parameters — vol_klos2007","text":"DBH Numeric vector. Diameter breast height (cm). height Numeric vector. Total height (m). species Character vector. Species code (e.g., \"PICE.MAR\"). subregion Optional Ecozone Ecoregion identifier","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_klos2007.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate tree volume in Manitoba using Kozak (1988) form with Klos (2004) parameters — vol_klos2007","text":"Klos, R. J., Wang, G. G., Dang, Q.-L., & East, E. W. (2007). Taper equations five major commercial tree species Manitoba, Canada. Western Journal Applied Forestry, 22(3), 163–170. Kozak, . (1988). variable-exponent taper equation. Canadian Journal Forest Research, 18, 1363–1368.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_kozak94.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume using Kozak (1994) taper model (BC, BEC-zone specific) — vol_kozak94","title":"Estimate tree volume using Kozak (1994) taper model (BC, BEC-zone specific) — vol_kozak94","text":"Implements Kozak (1994) taper/volume formulation British Columbia, using BEC-zone–specific parameter sets. Total volume computed independent merchantability; merchantable volume set 0 DBH jurisdictional minimum DBH criterion.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_kozak94.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume using Kozak (1994) taper model (BC, BEC-zone specific) — vol_kozak94","text":"","code":"vol_kozak94(DBH, height, species, BEC_zone)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_kozak94.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume using Kozak (1994) taper model (BC, BEC-zone specific) — vol_kozak94","text":"DBH Numeric vector diameter breast height (cm). height Numeric vector total tree height (m). species Character vector species codes (e.g. \"TSUG.HET\"). BEC_zone Character vector BEC zone codes (e.g., \"CWH\", \"ICH\", \"IDF\").","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_kozak94.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate tree volume using Kozak (1994) taper model (BC, BEC-zone specific) — vol_kozak94","text":"tibble volumes (m^3): total, merchantable.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"Implementation British Columbia volume equations developed Nigh (2016). model calculates total stem volume merchantable stem volume function diameter breast height (DBH) total tree height.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"","code":"vol_nigh2016(DBH, height, species, subregion)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"Nigh, G.D. (2016). Total merchantable volume equations common tree species British Columbia: region biogeoclimatic zone. Province British Columbia, Technical Report 106.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"DBH Numeric vector diameter breast height (cm). height Numeric vector total tree height (m). species Character vector species codes subregion Character scalar vector defining spatial stratum coefficients. Can \"Coast\" / \"Interior\" BEC zone code (e.g., \"CWH\", \"ICH\", \"BWBS\"). Must length 1 length DBH.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"tibble volumes (m\\(^3\\)): vol_total Numeric. Total stem volume (m\\(^3\\)), bark. vol_merchantable Numeric. Merchantable stem volume (m\\(^3\\)), bark.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"Parameters stratified either region (\"Coast\", \"Interior\") BEC zone (e.g., \"CWH\", \"ICH\", \"BWBS\"), depending parameter row requested via subregion. Model form (Nigh 2016): $$V = \\exp(b_0) \\cdot DBH^{b_1} \\cdot H^{b_2}$$ \\(V\\) volume (m\\(^3\\)), \\(DBH\\) cm, \\(H\\) m. Merchantable volume Nigh (2016) defined total volume minus stump (0.3 m) top volume 4 cm inside-bark diameter threshold (fixed definition original report).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_nigh2016.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate tree total and merchantable volume using Nigh (2016) equations (BC) — vol_nigh2016","text":"","code":"# Single tree, region coefficients vol_nigh2016(   DBH = 35,   height = 25,   species = \"POPU.TRI\",   subregion = \"Interior\" ) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.821            0.788  # Multiple trees, vectorized (mixed subregions allowed) vol_nigh2016(   DBH = c(22, 30, 45),   height = c(18, 24, 33),   species = c(\"PSEU.MEN\", \"THUJ.PLI\", \"POPU.TRI\"),   subregion = c(\"Coast\", \"ICH\", \"Interior\") ) #> # A tibble: 3 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.258            0.244 #> 2     0.661            0.626 #> 3     1.81             1.77"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume for Newfoundland — vol_nl","title":"Estimate tree volume for Newfoundland — vol_nl","text":"Implements Newfoundland individual-tree volume equations used Open Stand Model (OSM) API, based Honer’s refitted formulations.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume for Newfoundland — vol_nl","text":"","code":"vol_nl(DBH, height, species, subregion = \"Province\", keep_net = FALSE)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume for Newfoundland — vol_nl","text":"DBH Numeric vector. Diameter breast height (cm). height Numeric vector. Total tree height (m). species Character vector NFI species codes (e.g., `\"PICE.MAR\"`). subregion Character numeric vector. Either: - `\"Province\"` (default; uses province-wide equations), - District IDs `1-24`. District `2` `4-18` use district-level equations; others fall back province-wide equations. keep_net Logical. `TRUE`, additional columns `vol_merchantable_gross` `vol_merchantable_net` returned.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate tree volume for Newfoundland — vol_nl","text":"tibble :   - `vol_total`: Total stem volume inside bark (m³).   - `vol_merchantable`: Gross merchantable volume inside bark (m³). `keep_net = TRUE`, also returns:   - `vol_merchantable_gross`   - `vol_merchantable_net`","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate tree volume for Newfoundland — vol_nl","text":"Model structure: - District-level equations (NX-242) used District 2 4–18   balsam fir (`ABIE.BAL`) black spruce (`PICE.MAR`). - districts (including District 19 1–24 outside 2, 4–18)   fall back province-wide species equations (NX-122 total + NX-67 merchantable). original OSM implementation excluded District 19 produced unstable unrealistic results. function reproduces behavior consistency. Net merchantable volume: - Net merchantable volume equations available NX-242 district models. - available, net merchantable volume volume constrained   95 - default, function returns gross merchantable volume remain   consistent volume models package. Merchantable volume computed jurisdictional stump height top diameter limits obtained `get_merch_criteria(\"NL\")`. Trees minimum DBH threshold return zero merchantable volume, total volume still computed.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate tree volume for Newfoundland — vol_nl","text":"Honer, T.G. (1967). Standard volume tables merchantable conversion factors. Canadian Forest Service Information Report N-X-67. Ker, M.F. 1974. Metric Tree Volume Tables Newfoundland. Newfoundland Forest Research Centre, St. Johns, NF. Information Report N-X-122. https://ostrnrcan-dostrncan.canada.ca/handle/1845/238893 Warren, G.R. & Meades, J.P. (1986). Wood defect density studies II: Total net volume equations Newfoundland’s forest management units. Canadian Forest Service Information Report N-X-242.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_NL.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate tree volume for Newfoundland — vol_nl","text":"","code":"# Province-wide model (default) vol_nl(20, 20, \"PICE.MAR\") #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.249            0.229  # District-level model (NX-242 used for District 2) vol_nl(20, 20, \"PICE.MAR\", subregion = 2) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.306            0.288  # Return net merchantable volume (if available) vol_nl(20, 20, \"PICE.MAR\", subregion = 2, keep_net = TRUE) #> # A tibble: 1 × 4 #>   vol_total vol_merchantable vol_merchantable_gross vol_merchantable_net #>       <dbl>            <dbl>                  <dbl>                <dbl> #> 1     0.306            0.288                  0.288                0.281  # Tidyverse workflow example trees <- tibble::tibble(   DBH = c(15, 20, 25, 30),   height = c(15, 20, 21, 25),   species = c(\"PICE.MAR\", \"ABIE.BAL\",\"PICE.MAR\", \"BETU.PAP\"),   subregion = c(\"Province\", 2, 17, \"Province\") )  trees |>   dplyr::mutate(vol = vol_nl(DBH, height, species, subregion)) |>   tidyr::unnest(vol) #> # A tibble: 4 × 6 #>     DBH height species  subregion vol_total vol_merchantable #>   <dbl>  <dbl> <chr>    <chr>         <dbl>            <dbl> #> 1    15     15 PICE.MAR Province      0.118            0.102 #> 2    20     20 ABIE.BAL 2             0.284            0.270 #> 3    25     21 PICE.MAR 17            0.353            0.337 #> 4    30     25 BETU.PAP Province      0.661            0.626"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":null,"dir":"Reference","previous_headings":"","what":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"Estimates total (inside-bark) merchantable (inside-bark) stem volume using Sharma (2021) dimensionally compatible model developed commercial tree species central/eastern Canada northeastern US.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"","code":"vol_sharma2021(DBH, height, species)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"DBH Tree diameter breast height (cm) height Total height (m) species Species code (e.g., \"PICE.MAR\")","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"tibble columns vol_total vol_merchantable (m3)","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"Merchantable volume parameters correspond Sharma's fixed merchantability definition (0.3 m stump, 7 cm inside-bark top diameter), user-configurable.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"Sharma, M. 2021. Total Merchantable Volume Equations 25 Commercial Tree Species Grown Canada Northeastern United States. Forests 12:1270.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_sharma2021.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sharma (2021) stem volume using DBH and total height — vol_sharma2021","text":"","code":"# Single tree vol_sharma2021(   DBH = 30,   height = 22,   species = \"PICE.MAR\" ) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.683            0.659  # Multiple trees, mixed species vol_sharma2021(   DBH = c(25, 32, 18),   height = c(20, 24, 15),   species = c(\"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\") ) #> # A tibble: 3 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.433            0.412 #> 2     0.851            0.808 #> 3     0.181            0.165  # Works with the pipe operator: trees <- tibble::tibble(   tree_id = 1:4,   dbh = c(22, 30, 18, 35),   ht  = c(18, 24, 15, 27),   species = c(\"PICE.GLA\", \"PICE.GLA\", \"ABIE.BAL\", \"PINU.BAN\") ) trees |>   dplyr::mutate(vol = vol_sharma2021(dbh, ht, species)) |>   tidyr::unnest(vol) #> # A tibble: 4 × 6 #>   tree_id   dbh    ht species  vol_total vol_merchantable #>     <int> <dbl> <dbl> <chr>        <dbl>            <dbl> #> 1       1    22    18 PICE.GLA     0.303            0.287 #> 2       2    30    24 PICE.GLA     0.748            0.714 #> 3       3    18    15 ABIE.BAL     0.169            0.156 #> 4       4    35    27 PINU.BAN     1.18             1.15"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_total_to_merchantable.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","title":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","text":"Uses Boudewyn et al. (2007) Appendix 6 (Table 14) parameters convert total volume (live trees) merchantable volume via genus-level model.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_total_to_merchantable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","text":"","code":"vol_total_to_merchantable(   vol_total,   species,   jurisdiction,   ecozone,   include_prop = FALSE,   clamp_prop = TRUE,   warn_outside = TRUE,   clamp_x = FALSE )"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_total_to_merchantable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","text":"vol_total Numeric vector. Total volume per hectare (live trees). species Character vector. NFI species codes (e.g. \"PICE.MAR\"). genus used. jurisdiction Character vector. Jurisdiction code (e.g. \"AB\"). ecozone Ecozone identifier. Either: numeric ecozone code (1–15) official ecozone name (English French; case-insensitive). include_prop Logical. TRUE, return predicted merchantable proportion. clamp_prop Logical. TRUE (default), clamp predicted proportion [0, 1]. warn_outside Logical. TRUE (default), warn vol_total < volmin. clamp_x Logical. TRUE, replace vol_total pmax(vol_total, volmin) computing proportion model. Disabled default.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_total_to_merchantable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","text":"tibble one row per input column merchantable_volume.   Optionally includes prop_merch vol_total_used.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_total_to_merchantable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert total volume to merchantable volume (Boudewyn et al. 2007; Appendix 6 / Table 14) — vol_total_to_merchantable","text":"","code":"# ---- single stand ---------------------------------------------------------- vol_total_to_merchantable(   vol_total = 300,   species = \"PICE.MAR\",   jurisdiction = \"AB\",   ecozone = \"Taiga Plain\" ) #> # A tibble: 1 × 1 #>   vol_merchantable #>              <dbl> #> 1             262.  # ---- return predicted merchantable proportion ------------------------------ vol_total_to_merchantable(   vol_total = 300,   species = \"PICE.MAR\",   jurisdiction = \"AB\",   ecozone = 4,   include_prop = TRUE ) #> # A tibble: 1 × 2 #>   vol_merchantable prop_merch #>              <dbl>      <dbl> #> 1             262.      0.872  # ---- vectorized over volume ------------------------------------------------ vol_total_to_merchantable(   vol_total = c(50, 100, 300, 600),   species = \"PICE.MAR\",   jurisdiction = \"AB\",   ecozone = 4,   include_prop = TRUE ) #> # A tibble: 4 × 2 #>   vol_merchantable prop_merch #>              <dbl>      <dbl> #> 1             7.99      0.160 #> 2            39.2       0.392 #> 3           262.        0.872 #> 4           582.        0.969  # ---- tidyverse workflow ---------------------------------------------------- library(dplyr) library(tidyr)  stands <- tibble::tibble(   stand_id = 1:4,   vol_total = c(50, 150, 350, 600),   species = c(\"PICE.MAR\", \"PICE.GLA\", \"ABIE.BAL\", \"PSEU.MEN\"),   jurisdiction = c(\"AB\", \"ON\", \"QC\", \"BC\"),   ecozone = c(6, 6, 8, 13) )  stands |>   mutate(     merch = vol_total_to_merchantable(       vol_total = vol_total,       species = species,       jurisdiction = jurisdiction,       ecozone = ecozone,       include_prop = TRUE     )   ) |>   unnest(merch) #> # A tibble: 4 × 7 #>   stand_id vol_total species  jurisdiction ecozone vol_merchantable prop_merch #>      <int>     <dbl> <chr>    <chr>          <dbl>            <dbl>      <dbl> #> 1        1        50 PICE.MAR AB                 6             2.16     0.0431 #> 2        2       150 PICE.GLA ON                 6           122.       0.811  #> 3        3       350 ABIE.BAL QC                 8           310.       0.885  #> 4        4       600 PSEU.MEN BC                13           529.       0.882   # ---- chaining with Boudewyn v2b() ------------------------------------------ # Convert total volume -> merchantable volume -> biomass components stands |>   mutate(     merch = vol_total_to_merchantable(       vol_total = vol_total,       species = species,       jurisdiction = jurisdiction,       ecozone = ecozone     ),     biomass = v2b(       vol_merchantable = merch$vol_merchantable,       species = species,       jurisdiction = jurisdiction,       ecozone = ecozone     )   ) |>   unnest(biomass) #> Warning: There was 1 warning in `mutate()`. #> ℹ In argument: `biomass = v2b(...)`. #> Caused by warning: #> ! Some inputs are outside the calibration range of the Boudewyn proportion models (Table 7). Results are extrapolations. Set clamp_x = TRUE to clamp to [x_min, x_max]. #> # A tibble: 4 × 10 #>   stand_id vol_total species jurisdiction ecozone merch$vol_merchantable b_total #>      <int>     <dbl> <chr>   <chr>          <dbl>                  <dbl>   <dbl> #> 1        1        50 PICE.M… AB                 6                   2.16    12.6 #> 2        2       150 PICE.G… ON                 6                 122.      87.2 #> 3        3       350 ABIE.B… QC                 8                 310.     192.  #> 4        4       600 PSEU.M… BC                13                 529.     333.  #> # ℹ 3 more variables: b_bark <dbl>, b_branches <dbl>, b_foliage <dbl>"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":null,"dir":"Reference","previous_headings":"","what":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"Uses national Ung et al. (2013) taper model estimate total merchantable volume. `height` provided (`NA`), DBH-variant used. `height` provided, DBH+height variant used.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"","code":"vol_ung2013(DBH, height = NULL, species, jurisdiction)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"DBH Numeric vector diameter breast height (cm). height Optional numeric vector total height (m). `NULL` (default) `NA`, DBH-model used. species Character vector species codes (e.g., \"PICE.GLA\"). jurisdiction Character vector jurisdiction codes (e.g., \"BC\", \"\"). Required assign jurisdiction-specific merchantability criteria","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"tibble columns `vol_merchantable` `vol_total` (m^3).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"Ung, C.H., Guo, X.J., Fortin, M. (2013). Canadian national taper models. Forestry Chronicle 89, 211–224. https://doi.org/10.5558/tfc2013-040","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_ung2013.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Canadian national taper volume model (Ung et al. 2013) — vol_ung2013","text":"","code":"# --- DBH-only model (height not provided) --- vol_ung2013(   DBH = c(20, 30, 40),   species = c(\"PICE.GLA\", \"ABIE.BAL\", \"PICE.GLA\"),   jurisdiction = \"ON\" ) #> # A tibble: 3 × 2 #>   vol_merchantable vol_total #>              <dbl>     <dbl> #> 1            0.242     0.258 #> 2            0.618     0.628 #> 3            1.29      1.29   # --- DBH + height model --- vol_ung2013(   DBH = c(20, 30, 40),   height = c(18, 24, 30),   species = c(\"PICE.GLA\", \"ABIE.BAL\", \"PICE.GLA\"),   jurisdiction = \"ON\" ) #> # A tibble: 3 × 2 #>   vol_merchantable vol_total #>              <dbl>     <dbl> #> 1            0.235     0.249 #> 2            0.730     0.739 #> 3            1.53      1.53   # --- Vector recycling (common in dplyr pipelines) --- vol_ung2013(   DBH = c(25, 35),   height = 22,   species = \"PICE.GLA\",   jurisdiction = \"QC\" ) #> # A tibble: 2 × 2 #>   vol_merchantable vol_total #>              <dbl>     <dbl> #> 1            0.459     0.471 #> 2            0.917     0.923  # --- Using inside mutate(): DBH-only fallback --- trees <- tibble::tibble(   DBH = c(22, 30, 18),   species = c(\"PICE.GLA\", \"PICE.GLA\", \"ABIE.BAL\") )  trees |>   dplyr::mutate(     vol = vol_ung2013(DBH, species = species, jurisdiction = \"NB\")   ) |> tidyr::unnest(vol) #> # A tibble: 3 × 4 #>     DBH species  vol_merchantable vol_total #>   <dbl> <chr>               <dbl>     <dbl> #> 1    22 PICE.GLA            0.321     0.330 #> 2    30 PICE.GLA            0.672     0.677 #> 3    18 ABIE.BAL            0.199     0.213"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario)","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"","code":"vol_zakrzewski2013(DBH, height, species)"},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"Zakrzewski, W. T., Penner, M. (2013). Comparison Tree Stem Taper Models Use Ontario. Ontario Forest Research Institute, Report 176.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"DBH Numeric vector diameter breast height (cm). height Numeric vector total tree height (m). species Character vector species codes","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"tibble volumes (m^3): total merchantable.","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"Implementation based original R script provided Margaret Penner, refactored CanadaForestAllometry (vectorized inputs, standardized species codes, merchantability criteria via get_merch_criteria).","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/reference/vol_zakrzewski2013.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate tree volume using Zakrzewski (2013) taper model (Ontario) — vol_zakrzewski2013","text":"","code":"# Single tree vol_zakrzewski2013(   DBH = 20,   height = 22,   species = \"PICE.MAR\" ) #> # A tibble: 1 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.304            0.278  # Vectorized input (multiple trees) vol_zakrzewski2013(   DBH = c(20, 30, 40),   height = c(18, 22, 28),   species = c(\"PICE.MAR\", \"PINU.STR\", \"THUJ.OCC\") ) #> # A tibble: 3 × 2 #>   vol_total vol_merchantable #>       <dbl>            <dbl> #> 1     0.254            0.229 #> 2     0.672            0.616 #> 3     1.22             1.16"},{"path":[]},{"path":"https://ptompalski.github.io/CanadaForestAllometry/news/index.html","id":"new-newfoundland-and-labrador-volume-model-vol_nl-0-7-1","dir":"Changelog","previous_headings":"","what":"New: Newfoundland and Labrador volume model (vol_nl())","title":"CanadaForestAllometry 0.7.1","text":"Ker (1974) — N-X-122 (province-wide total volume) Warren & Meades (1986) — N-X-242 (district-level total, gross net volume) Honer (1967) — N-X-67 (merchantable conversion factors) District-specific equations used districts 2 4–18 District 19 intentionally excluded (unstable behaviour noted original implementation) districts (including 1, 3, 20–24) fall back province-wide equations Net merchantable volume (available) internally constrained ≥95% gross volume subregion = \"Province\" uses province-wide parameters Output includes vol_total vol_merchantable, consistent volume models Optional keep_net = TRUE exposes gross net merchantable components","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/news/index.html","id":"parameter-storage-refactor-0-7-1","dir":"Changelog","previous_headings":"","what":"Parameter storage refactor","title":"CanadaForestAllometry 0.7.1","text":"Model parameters now stored internal datasets","code":""},{"path":"https://ptompalski.github.io/CanadaForestAllometry/news/index.html","id":"canadaforestallometry-070","dir":"Changelog","previous_headings":"","what":"CanadaForestAllometry 0.7.0","title":"CanadaForestAllometry 0.7.0","text":"Renamed package: CTAE now CanadaForestAllometry. naming change existing functions available new package name.","code":""}]
