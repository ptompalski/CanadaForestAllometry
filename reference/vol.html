<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate tree volume: choose best available model or run all candidate models — vol • CanadaForestAllometry</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate tree volume: choose best available model or run all candidate models — vol"><meta name="description" content="`vol()` is the main convenience wrapper for estimating total and
merchantable stem volume from diameter and height. It automatically
selects and runs one (or more) of the volume models implemented in CanadaForestAllometry,
based on the model registry returned by [volume_model_registry()]."><meta property="og:description" content="`vol()` is the main convenience wrapper for estimating total and
merchantable stem volume from diameter and height. It automatically
selects and runs one (or more) of the volume models implemented in CanadaForestAllometry,
based on the model registry returned by [volume_model_registry()]."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CanadaForestAllometry</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate tree volume: choose best available model or run all candidate models</h1>

      <div class="d-none name"><code>vol.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`vol()` is the main convenience wrapper for estimating total and
merchantable stem volume from diameter and height. It automatically
selects and runs one (or more) of the volume models implemented in CanadaForestAllometry,
based on the model registry returned by [volume_model_registry()].</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vol</span><span class="op">(</span></span>
<span>  <span class="va">DBH</span>,</span>
<span>  height <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  <span class="va">species</span>,</span>
<span>  <span class="va">jurisdiction</span>,</span>
<span>  subregion <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  pick_best <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keep_model_id <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dbh">DBH<a class="anchor" aria-label="anchor" href="#arg-dbh"></a></dt>
<dd><p>Numeric vector. Diameter at breast height (cm).</p></dd>


<dt id="arg-height">height<a class="anchor" aria-label="anchor" href="#arg-height"></a></dt>
<dd><p>Numeric vector. Total height (m). Can be `NA` to use the DBH-only models (currently only `vol_ung2013()`).</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Character vector. Species codes (e.g., "PICE.GLA").</p></dd>


<dt id="arg-jurisdiction">jurisdiction<a class="anchor" aria-label="anchor" href="#arg-jurisdiction"></a></dt>
<dd><p>Character scalar or vector. Province/territory code (e.g., "BC", "QC").</p></dd>


<dt id="arg-subregion">subregion<a class="anchor" aria-label="anchor" href="#arg-subregion"></a></dt>
<dd><p>Optional character vector. Subregion identifier (e.g., BEC zone for `vol_kozak94()`).</p></dd>


<dt id="arg-pick-best">pick_best<a class="anchor" aria-label="anchor" href="#arg-pick-best"></a></dt>
<dd><p>Logical. If `TRUE` (default), pick the single best model per tree using `rank`.
If `FALSE`, compute all candidate model outputs per tree and return a list-column
(one tibble per tree) that can be unnested for comparison.</p></dd>


<dt id="arg-keep-model-id">keep_model_id<a class="anchor" aria-label="anchor" href="#arg-keep-model-id"></a></dt>
<dd><p>Logical. If `TRUE`, include a `vol_model` column with the engine function name used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If `pick_best = TRUE`, a tibble with one row per tree and columns:
`vol_total`, `vol_merchantable`, and optionally `vol_model`.</p>
<p>If `pick_best = FALSE`, a list (suitable for use as a list-column in `dplyr::mutate()`)
with one element per tree. Each element is a tibble of candidate model outputs
(`vol_total`, `vol_merchantable`, and optionally `vol_model`).</p>
    </div>
    <div class="section level2">
    <h2 id="model-selection-logic">Model selection logic<a class="anchor" aria-label="anchor" href="#model-selection-logic"></a></h2>


<p>Model selection is driven by the model registry and occurs per input tree:</p><ol><li><p>Geographic applicability: models are filtered to those whose
    `province_scope` includes the provided `jurisdiction` (or `"ALL"`).</p></li>
<li><p>Species coverage: models are filtered to those that include the
    provided `species` in their parameter tables. Some models may include
    genus/group codes (e.g., `"PICE.SPP"`); these are treated
    as covering all matching species within that genus/group.</p></li>
<li><p>Required inputs: models that require total height are excluded
    when `height` is missing. Models that require a subregion (e.g., BEC zone
    for certain provincial models) are excluded when `subregion` is missing.</p></li>
<li><p>Model ranking: if multiple eligible models remain, `pick_best = TRUE`
    selects the highest-ranked model (`rank`) for each tree.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="fallback-behavior">Fallback behavior<a class="anchor" aria-label="anchor" href="#fallback-behavior"></a></h2>


<p>Availability is evaluated at the species level, not only by jurisdiction.
This means a regional/provincial model may exist for a jurisdiction but may
not include coefficients for the provided species. In such cases, `vol()`
automatically falls back to another eligible model (e.g., a multi-province
regional model or a national model) that *does* cover the species and required
inputs.</p>
    </div>
    <div class="section level2">
    <h2 id="important-limitations-and-recommended-use">Important limitations and recommended use<a class="anchor" aria-label="anchor" href="#important-limitations-and-recommended-use"></a></h2>


<ul><li><p>This is an automatic wrapper. Because selection is registry-driven,
    `vol()` may use a model that is not the one you intended (e.g., a national
    model instead of a regional model, or a different regional model than you
    expected), especially when the preferred model is not available for the
    input species or missing required inputs.</p></li>
<li><p>Model outputs differ. Different models will generally return
    slightly different volume estimates for the same DBH/height/species due to
    differences in model form, fitted data, geographic scope, and
    merchantability assumptions. These differences are expected.</p></li>
<li><p>If you require a specific model, do not use `vol()`. Instead, call
    the relevant model function directly (e.g., `vol_huang94()`, `vol_kozak94()`,
    `vol_ung2013()`, etc.) to ensure full control and reproducibility.</p></li>
<li><p>Investigate before operational use. It is strongly recommended to
    run `vol()` with `pick_best = FALSE` during exploratory analyses to inspect
    which models are eligible and how sensitive results are to model choice.
    When `pick_best = FALSE`, `vol()` returns a list-column (one element per
    tree) containing a tibble of candidate model outputs; this can be unnested
    to compare models.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## --- Basic usage: pick best available model (default) ---</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"PICE.MAR"</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"ON"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.285            0.260 vol_zakrzewski2013</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Return all applicable models (one row per engine) ---</span></span></span>
<span class="r-in"><span><span class="co">## Note: national Ung DBH-only and DBH+HT variants are collapsed</span></span></span>
<span class="r-in"><span><span class="co">## into a single result (preferring the height-based variant).</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"PICE.MAR"</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"ON"</span>,</span></span>
<span class="r-in"><span>  pick_best <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  keep_model_id <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.260            0.227 vol_honer83       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     0.282            0.267 vol_sharma2021    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     0.266            0.248 vol_ung2013       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>     0.285            0.260 vol_zakrzewski2013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Missing height: height-dependent models are skipped ---</span></span></span>
<span class="r-in"><span><span class="co">## Falls back to DBH-only models where available (e.g. national Ung).</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"BETU.PAP"</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"QC"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.441            0.428 vol_ung2013</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Regional model with required subregion (BC example) ---</span></span></span>
<span class="r-in"><span><span class="co">## Kozak (1994) requires a BEC zone; if provided, it is preferred.</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">22</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"THUJ.PLI"</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"BC"</span>,</span></span>
<span class="r-in"><span>  subregion <span class="op">=</span> <span class="st">"CWH"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.655            0.565 vol_kozak94</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Automatic fallback when a regional model does not cover species ---</span></span></span>
<span class="r-in"><span><span class="co">## If no provincial model covers the species, a suitable national or</span></span></span>
<span class="r-in"><span><span class="co">## multi-province regional model is used instead.</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fl">18</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">15</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"ACER.SAC"</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"MB"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.151            0.142 vol_ung2013</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Vectorized input ---</span></span></span>
<span class="r-in"><span><span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">25</span>, <span class="fl">32</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">25</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PICE.MAR"</span>, <span class="st">"BETU.PAP"</span>, <span class="st">"ACER.RUB"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span> <span class="st">"ON"</span>,</span></span>
<span class="r-in"><span>  keep_model_id <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vol_total vol_merchantable vol_model         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     0.172            0.150 vol_zakrzewski2013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     0.411            0.353 vol_zakrzewski2013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     0.766            0.635 vol_zakrzewski2013</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#' ## --- Tidyverse workflow with multiple species and jurisdictions ---</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">trees</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  DBH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">22</span>, <span class="fl">30</span>, <span class="fl">26</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">18</span>, <span class="fl">22</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PICE.MAR"</span>, <span class="st">"BETU.PAP"</span>, <span class="st">"POPU.TRE"</span>, <span class="st">"PSEU.MEN"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  jurisdiction <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AB"</span>, <span class="st">"ON"</span>, <span class="st">"QC"</span>, <span class="st">"BC"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  subregion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"CWH"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">trees</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>      DBH <span class="op">=</span> <span class="va">DBH</span>,</span></span>
<span class="r-in"><span>      height <span class="op">=</span> <span class="va">height</span>,</span></span>
<span class="r-in"><span>      species <span class="op">=</span> <span class="va">species</span>,</span></span>
<span class="r-in"><span>      jurisdiction <span class="op">=</span> <span class="va">jurisdiction</span>,</span></span>
<span class="r-in"><span>      subregion <span class="op">=</span> <span class="va">subregion</span>,</span></span>
<span class="r-in"><span>      keep_model_id <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `.out = purrr::map2(.data$engine, .data$.args,</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   safe_call_engine_one)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `merch = purrr::pmap(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `merch = purrr::pmap(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> BEC_zone missing; using conservative BC 'UNKNOWN' utilization.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DBH height species  jurisdiction subregion vol_total vol_merchantable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>    18     15 PICE.MAR AB           <span style="color: #BB0000;">NA</span>            0.158            0.145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>    22     18 BETU.PAP ON           <span style="color: #BB0000;">NA</span>            0.291            0.233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>    30     22 POPU.TRE QC           <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span>                0.674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>    26     20 PSEU.MEN BC           CWH           0.387            0.305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: vol_model &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## --- Same data, return all applicable volume models per tree ---</span></span></span>
<span class="r-in"><span><span class="va">trees</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">vol</span><span class="op">(</span></span></span>
<span class="r-in"><span>      DBH <span class="op">=</span> <span class="va">DBH</span>,</span></span>
<span class="r-in"><span>      height <span class="op">=</span> <span class="va">height</span>,</span></span>
<span class="r-in"><span>      species <span class="op">=</span> <span class="va">species</span>,</span></span>
<span class="r-in"><span>      jurisdiction <span class="op">=</span> <span class="va">jurisdiction</span>,</span></span>
<span class="r-in"><span>      subregion <span class="op">=</span> <span class="va">subregion</span>,</span></span>
<span class="r-in"><span>      pick_best <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      keep_model_id <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `.out = purrr::map2(.data$engine, .data$.args,</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   safe_call_engine_one)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `merch = purrr::pmap(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> There was 1 warning in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `merch = purrr::pmap(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> BEC_zone missing; using conservative BC 'UNKNOWN' utilization.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DBH height species  jurisdiction subregion `vol(...)`      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>    18     15 PICE.MAR AB           <span style="color: #BB0000;">NA</span>        <span style="color: #949494;">&lt;tibble [2 × 3]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>    22     18 BETU.PAP ON           <span style="color: #BB0000;">NA</span>        <span style="color: #949494;">&lt;tibble [4 × 3]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>    30     22 POPU.TRE QC           <span style="color: #BB0000;">NA</span>        <span style="color: #949494;">&lt;tibble [4 × 3]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>    26     20 PSEU.MEN BC           CWH       <span style="color: #949494;">&lt;tibble [3 × 3]&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Piotr Tompalski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

